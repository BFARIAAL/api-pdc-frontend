<!DOCTYPE html>
<html lang="en"  xmlns:th="http://www.thymeleaf.org">
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.4/jquery.min.js"></script>
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-rbsA2VBKQhggwzxH7pPCaAqO46MgnOM80zW1RWuH61DGLwZJEdK2Kadq2F9CUG65" crossorigin="anonymous">
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-kenU1KFdBIe4zVF0s0G1M5b4hcpxyD9F7jL+jjXkk+Q2h455rYXK/7HAuoJl+0I4" crossorigin="anonymous"></script>
<link href="/css/button.css" rel="stylesheet"/>

<head>
    <meta charset="UTF-8">
    <title>Add Location</title>
    <style>
        body {
            font-family: 'Rubik';font-size: 22px;
        }
        .center {
          display: block;
          margin-left: auto;
          margin-right: auto;
          width: 50%;
        }
    </style>
    <script>
        $(function(){
          $("#menu").load("images/navbar.html");
        });

        $.get('/locations/all').then(function(response) {

        $.each(response, function(index, item) {

            const row = $('<tr></tr>');
            const locCell = $('<td></td>').text(item.locCode);

            row.append(locCell);

            $('#dynamic_locations').append(row);
      });
    });
  $(function(){ // this will be called when the DOM is ready
  $('#locations_search').keyup(function() {

  const searchTerm = $('#locations_search').val();

  $.get('/location/' + searchTerm )
    .then(function(response) {

      $('#dynamic_locations').empty();

      if (!response || response.length === 0) {
        return;
      }

      response.forEach(item => {
        const row = $('<tr></tr>');
            const locCell = $('<td></td>').text(item.locCode);

            row.append(locCell);

            $('#dynamic_locations').append(row);
      });

    });

});
        });
    </script>
    <div id="menu" name="menu"></div>

</head>
<body style="background-color:#0A7E8C; color:white">
<br>
<h3 style="text-align:center; font-weight: bold;">Add a Location to the DB here</h3>
<br>
<br>
<form method="post" action="/register-location" style="display:block; margin-right:auto; margin-left:auto;width:30%">


    <br>
    <br>
    Location Code : &nbsp <input name="loc_code"  type="text" class="form-control" id="loc_code" placeholder="Enter Location Code" width="20%" style="display:flex!important;align:center">
    <br>
    <input class="button-24" type="submit" style="align:center;border-radius: 8px;text-align:center; margin-right:auto;margin-left:auto;display:flex" >


</form>
<br>
<br>
<input type="text" id="locations_search" name="locations_search" style="display:flex;margin-right:auto;margin-left:auto" placeholder="Search by Location Code"/>
<br><br>
<p style="text-align:center;font-weight:bold;margin-top:10px">List of Locations:</p>
<table class="table table-dark" style="width:50%; margin-right:auto;margin-left:auto">
    <thead>
    <tr>
        <th scope="col">Location Code</th>
    </tr>
    </thead>
    <tbody id="dynamic_locations" name="dynamic_locations">

    </tbody>
</table>
</body>
</html>