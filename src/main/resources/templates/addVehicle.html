<!DOCTYPE html>
<html lang="en"  xmlns:th="http://www.thymeleaf.org">
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.4/jquery.min.js"></script>
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-rbsA2VBKQhggwzxH7pPCaAqO46MgnOM80zW1RWuH61DGLwZJEdK2Kadq2F9CUG65" crossorigin="anonymous">
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-kenU1KFdBIe4zVF0s0G1M5b4hcpxyD9F7jL+jjXkk+Q2h455rYXK/7HAuoJl+0I4" crossorigin="anonymous"></script>
<link href="/css/button.css" rel="stylesheet"/>

<head>
    <meta charset="UTF-8">
    <title>Add Vehicle</title>
    <style>
        body {
            font-family: 'Rubik';font-size: 22px;
        }
        .center {
          display: block;
          margin-left: auto;
          margin-right: auto;
          width: 50%;
        }
    </style>
    <script>
        $(function(){
          $("#menu").load("images/navbar.html");
        });

        $.get('localhost:8080/api-pdc/api/load_management/vehicles/all').then(function(response) {

        $.each(response, function(index, item) {

            const row = $('<tr></tr>');

            const vinCell = $('<td></td>').text(item.vin);
            const locCell = $('<td></td>').text(item.locCode);

            row.append(vinCell, locCell);

            $('#dynamic_cars').append(row);
      });
    });
  $(function(){ // this will be called when the DOM is ready
  $('#car_search').keyup(function() {

  const searchTerm = $('#car_search').val();

  // $.get('/vehicle/' + searchTerm )
  //   .then(function(response) {
  //
  //     $('#dynamic_cars').empty();
  //
  //     if (!response || response.length === 0) {
  //       return;
  //     }
  //
  //     response.forEach(item => {
  //       const row = $('<tr></tr>');
  //
  //           const vinCell = $('<td></td>').text(item.vin);
  //           const locCell = $('<td></td>').text(item.locCode);
  //
  //           row.append(vinCell, locCell);
  //
  //           $('#dynamic_cars').append(row);
  //     });
  //
  //   });

});
        });
    </script>
    <div id="menu" name="menu"></div>

</head>
<body style="background-color:#0A7E8C; color:white">
<br>
<h3 style="text-align:center; font-weight: bold;">Add a Vehicle to the DB here</h3>
<br>
<br>
<form method="post" action="/register-car" style="display:block; margin-right:auto; margin-left:auto;width:30%">

    Car VIN : &nbsp <input name="vin"  type="text" class="form-control" id="vin" placeholder="Enter car VIN" width="20%" style="display:flex!important;align:center">
    <br>
    <br>
    Location Code : &nbsp
    <select class="form-control" id="loc_code" name="loc_code">
        <option th:each="option : ${options}" th:value="${option}" th:text="${option}"></option>
    </select>
    <br>
    <input class="button-24" type="submit" style="align:center;border-radius: 8px;text-align:center; margin-right:auto;margin-left:auto;display:flex" >


</form>
<br>
<br>
<input type="text" id="car_search" name="car_search" style="display:flex;margin-right:auto;margin-left:auto" placeholder="Search by VIN"/>
<br><br>
<p style="text-align:center;font-weight:bold;margin-top:10px">Cars in the system:</p>
<table class="table table-dark" style="width:50%; margin-right:auto;margin-left:auto">
    <thead>
    <tr>
        <th scope="col">VIN</th>
        <th scope="col">Location Code</th>
    </tr>
    </thead>
    <tbody id="dynamic_cars" name="dynamic_cars">

    </tbody>
</table>
</body>
</html>